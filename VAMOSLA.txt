#!/bin/bash
apt-get install isc-dhcp-server -y
sed -i '17s/.*/INTERFACESv4="enp0s8"/' /etc/default/isc-dhcp-server
cat /etc/default/isc-dhcp-server
cat /etc/dhcp/dhcpd.conf
echo "Qual o Domínio que pretende criar?"
read dominio
sed -i '10s/.*/option domain-name '"\"$dominio"\"';/' /etc/dhcp/dhcpd.conf
echo "Insira DNS primário: "
read DNSprimario
echo "Insira DNS secundário: "
read DNSsecundario
sed -i '11s/.*/option domain-name-servers '"$DNSprimario"','" $DNSsecundario"';/' /etc/dhcp/dhcpd.conf
echo "Insira a rede /24 que pretende: "
read rede
echo "Insira o IP da rede onde vai começar a pool: "
read inicio
echo "Insira o IP da rede on vai terminar a pool: "
read termino
echo "Insira o IP do router: "
read rato
#boraLa="subnet 172.20.27.0 netmask 255.255.255.0 {\n\trange 172.20.27.100 172.20.27.150;\n\toption routers 172.20.27.1;\n}"
boraLa="subnet $rede netmask 255.255.255.0 {\n\trange $inicio $termino;\n\toption routers $rato;\n}"
echo -e $boraLa >> /etc/dhcp/dhcpd.conf
service isc-dhcp-server restart
sleep(5)
service isc-dhcp-server status
